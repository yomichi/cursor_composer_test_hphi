### #34

いい感じの図になった。

![energy_gap.png](:/4317f46c821048728c560b8354c17810)

一旦まとめよう

#### In

テストも含めてうまく動作しました。
ToDoリスト `references/todo.md` および `references/tests/analyze_results.py.md` にあるチェックリストのうち、完了したものをチェックしてください。

#### Out

はい、完了したタスクをチェックしていきます。

````markdown:references/tests/analyze_results.py.md
// ... existing code ...
## 3. テストケースの優先順位

### 1. 基本機能のテスト
- [x] コマンドライン引数の処理
  - [x] デフォルト値の確認
  - [x] カスタム値の確認
  - [x] 型の確認
- [x] データ読み込みの基本機能
  - [x] ファイル読み込み
  - [x] エネルギー値の抽出

### 2. データ処理
- [x] エネルギーギャップの計算
  - [x] 基本的な計算
  - [x] エッジケースの処理
- [x] データの整理
  - [x] サイズ順のソート
  - [x] 不完全なデータの処理

### 3. 出力生成
- [x] データファイルの生成
  - [x] フォーマットの確認
  - [x] 数値の精度
- [x] プロットの生成
  - [x] 基本的なプロット
  - [x] 体裁の調整

### 4. エッジケース
- [x] 異常データの処理
  - [x] 不正なファイル形式
  - [x] 異常値の検出
- [ ] リソース制限
  - [ ] メモリ使用量
  - [ ] ディスク容量
// ... existing code ...
```

```markdown:references/todo.md
# ToDo

- [x] コマンドライン引数の処理
  - [x] `--work-dir`オプションの実装
  - [x] デフォルト値の設定
  - [x] エラー処理
- [x] 結果ディレクトリの検索
  - [x] `results/raw/N*`パターンのマッチング
  - [x] システムサイズでのソート
- [x] エネルギー値の読み込み
  - [x] `zvo_energy.dat`の解析
  - [x] 基底状態と第一励起状態の抽出
  - [x] エラー処理
- [x] ギャップ計算
  - [x] E₁ - E₀の計算
  - [x] エラー処理（負のギャップなど）
- [x] データ出力
  - [x] テキストファイル形式の決定
  - [x] 1/N → 0への外挿
  - [x] フィッティングパラメータの出力
- [x] プロット生成
  - [x] 1/Nに対するギャップのプロット
  - [x] フィッティング直線の表示
  - [x] 外挿値の表示
  - [x] 適切な軸ラベルと凡例
- [ ] パフォーマンス最適化
  - [ ] メモリ使用量の削減
  - [ ] 処理速度の改善
- [ ] ドキュメント
  - [ ] README.mdの作成
  - [ ] コマンドラインオプションの説明
  - [ ] 出力ファイルのフォーマット説明
````


完了したタスクをチェックしました。主な達成点は以下の通りです：

1. **基本機能の実装**:
   - コマンドライン引数の処理
   - 結果ディレクトリの検索
   - エネルギー値の読み込みと解析
   - ギャップ計算

2. **データ処理**:
   - エネルギーギャップの計算
   - データの整理とソート
   - 1/N → 0への外挿

3. **出力機能**:
   - データファイルの生成
   - プロットの作成と体裁の調整
   - フィッティングと外挿値の表示

未完了のタスクは以下の通りです：

1. **リソース最適化**:
   - メモリ使用量の最適化
   - 処理速度の改善

2. **ドキュメント作成**:
   - README.mdの作成
   - コマンドラインオプションの説明
   - 出力ファイルのフォーマット説明

これらの未完了タスクについても、必要に応じて実装を進めることができます。


