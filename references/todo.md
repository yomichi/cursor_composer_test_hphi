# 実装ToDo

## 1. generate_input.py
- [x] コマンドライン引数の処理
  - [x] argparseを使用したオプションの設定
  - [x] デフォルト値の設定（2S=1, Δ=1.0, sizes=[4,6,8,10,12]）
  - [x] サイズリストの文字列からリストへの変換

- [x] 作業ディレクトリの管理
  - [x] デフォルト（カレントディレクトリ）または指定ディレクトリの確認
  - [x] data/ディレクトリの作成
  - [x] 各サイズのディレクトリ作成

- [x] StdFace.defの生成
  - [x] テンプレート文字列の作成
  - [x] 各サイズごとのファイル生成
  - [x] パラメータの妥当性チェック（2S > 0）

## 2. run_calculations.py
- [x] コマンドライン引数の処理
  - [x] argparseを使用したwork-dirオプションの設定
  - [x] HPhi実行ファイルのパス設定

- [x] 計算の実行
  - [x] data/ディレクトリ内のN*ディレクトリの検索
  - [x] 各ディレクトリでのHPhi実行
  - [x] 進捗状況の表示

- [x] 結果の管理
  - [x] results/raw/ディレクトリの作成
  - [x] 計算結果の移動
  - [x] エラー時のハンドリング

## 3. analyze_results.py
- [x] コマンドライン引数の処理
  - [x] `--work-dir`オプションの実装
  - [x] デフォルト値の設定
  - [x] エラー処理

- [x] データ読み込み
  - [x] results/raw/内の各サイズディレクトリからzvo_energy.datを読み込み
  - [x] エネルギー値の抽出（E₀, E₁）
  - [x] エラー処理

- [x] データ処理
  - [x] エネルギーギャップの計算（Δ = E₁ - E₀）
  - [x] エラー処理（負のギャップなど）
  - [x] サイズごとのデータ整理
  - [x] energy_gap.datファイルの生成

- [x] プロット生成
  - [x] 1/Nに対するギャップのプロット
  - [x] フィッティング直線の表示
  - [x] 外挿値の表示
  - [x] 適切な軸ラベルと凡例
  - [ ] 複数フォーマットでの出力（PDF/PNG）

## 追加の改善事項
- [ ] タイムアウト処理の実装
- [ ] 並行実行のサポート
- [ ] ログ機能の強化
- [ ] エラー時のバックアップ機能

## 共通の実装事項
- [x] エラー処理の実装
  - [x] ファイル・ディレクトリの存在確認
  - [x] パラメータの妥当性チェック
  - [x] 例外処理

- [ ] ログ出力
  - [ ] 進捗状況の表示
  - [ ] エラーメッセージの出力

- [ ] コードドキュメント
  - [ ] 関数のdocstring
  - [ ] 使用方法の説明
  - [ ] 必要なパッケージの記載

- [ ] パフォーマンス最適化
  - [ ] メモリ使用量の削減
  - [ ] 処理速度の改善

- [ ] ドキュメント
  - [ ] README.mdの作成
  - [ ] コマンドラインオプションの説明
  - [ ] 出力ファイルのフォーマット説明
